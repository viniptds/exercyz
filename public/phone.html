<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Audio Filter with Hands</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="phone-wrap">
      <div class="phone">
        <div class="btn left top"></div>
        <div class="btn left middle"></div>
        <div class="btn left bottom"></div>
        <div class="btn right"></div>

        <div class="screen">
          <div class="island" aria-hidden="true"></div>
          <!-- Start content -->
          <div class="wrap">
            <div id="stage">
              <div id="video-zone">
                <video id="video" playsinline autoplay muted></video>
              </div>
              <canvas id="overlay"></canvas>
              <div id="hud">
                <div class="row">
                  <div id="counter" class="text-white">✋ 0</div>
                  <button id="flip" class="text-white">Trocar câmera</button>
                </div>
                <div id="status" class="small text-white">Inicializando…</div>
              </div>
              <div id="menu">
                <button class="text-white hidden" id="startBtn">Iniciar</button>

                <button class="text-white hidden" id="stopBtn">Parar</button>
                <div class="hidden text-white" id="filterPercent">0%</div>
                <!-- TODO: record track -->
                <!-- <button class="small" id="recordBtn">Record</button> -->
              </div>
            </div>
            <div class="small text-white">
              Dica: uma boa iluminação melhora a precisão.
            </div>

            <!-- Audio options -->
            <!-- Option 1: embedded audio -->
            <audio
              src="./audio.mp3"
              id="audio"
              class="hidden"
              controls
              loop
            ></audio>

            <!-- Option 2: Spotify audio -->
            <!-- TODO: Add spotify audio source -->
            <!-- embedded Spotify -->
          </div>
          <!-- End content -->
           
          <div class="home-indicator" aria-hidden="true"></div>
        </div>
      </div>
    </div>

    <script>
      const audioEl = document.getElementById("audio");
      const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      const source = audioCtx.createMediaElementSource(audioEl);
      const video = document.getElementById("video");

      const filter = audioCtx.createBiquadFilter();
      filter.type = "lowpass";
      filter.frequency.value = 20000; // start with no cut
      source.connect(filter).connect(audioCtx.destination);

      const debug = true;
      let running = false;
    </script>
    <script type="module" src="index.js"></script>
    <script type="module" src="demo.js"></script>
    <!-- <script type="module" src="deadlift.js"></script> -->
    <!-- <script type="module" src="boxing.js"></script> -->
  </body>
</html>
